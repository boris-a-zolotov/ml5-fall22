\subsection{Лекция 11}

\begin{theorem}[теорема Гёделя о полноте]\
    \begin{enumerate}
        \item Для любой теории $T$ и любого предложения $\vfi$ в той же сигнатуре $T\vdash \vfi \iff T\models \vfi$
        \item $\vfi$ тождественно истинна $\iff$ $\vfi$ выводима в $\text{ИП}_\sigma$ 
    \end{enumerate}
\end{theorem}

\begin{proof}
    Второй пункт получается из первого при $T = \varnothing$. Теперь докажем первый пункт.

    $\Rightarrow$ Доказательство довалось на первом курсе. На практиках доказали, что все аксиомы тождественно истинны, правила вывода сохраняют истинность. 

    $\Leftarrow$ $T\models \vfi$, значит $T\cup\set*{\neg\vfi}$ не имеет модели. Из теоремы о существовании модели отсюда следует, что $T\cup\{\neg \vfi\}$ противоречива. Тогда $T\vdash\neg\neg\vfi$, из эквивалентности $\vfi\equiv\neg\neg\vfi$ получаем $T\vdash\vfi$, что и требовалось.
\end{proof}

\begin{corollary}\
    \begin{enumerate}
        \item Если $\sigma$ конечна, то множество $\set*{\vfi \mid \text{формула } \vfi \text{ тождественно истинна}}$ перечислимо, то есть сущестует алгоритм, перечисляющий элементы этого множества.
        \item Если $\sigma$ конечна, $T$~— перечислимое множество предложений, то $[T]$ (множество следствий $T$) перечислимо.
        \item Если $\sigma$ конечно, $T$ перечислимо, $T$ полная, то тогда $[T]$ разрешимо, то есть существует алгоритм, распознающий логические следствия из $T$.
        \item Множество выводов $\vfi_1, \ldots, \vfi_n$ в $\text{ИП}_\sigma$ разрешимо.
    \end{enumerate}
\end{corollary}

\begin{proof}\
    \begin{enumerate}
        \item Следует из второго при $T=\varnothing$ 
        \item $T$ перечислимо, множество аксиом $\text{ИП}^*_\sigma$ тоже перечислимо. Перечисляя формулы из объединения этих двух перечислимых и применяя правила вывода, можно перечислить и все выводимые.

        % Немного философии
        \begin{remark}
            Проверка $\mathbb{A}\models \vfi(\overline{a})$ очень неалгоритмична, потому что надо перебирать все элементы модели. Поэтому вычислительная сложность $\models \vfi$ необозрима. А для $\vdash\vfi$ есть перечислимый алгоритм. В этом и заключается глубина теоремы Гёделя.
        \end{remark}

        \begin{exmpl}
            Для $T = ZFC$ получаем перечислимость $[ZFC]$. А это вся математика!
        \end{exmpl}

        % Обратно к доказательству (пункт 3)
        \item Пользуемся пунктом 2. Либо $\vfi\in[T]$, либо $\neg\vfi\in[T]$. Запускаем перечисление $[T]$ и ждём, пока встретится $\vfi$ или $\neg\vfi$.
        
        \item Алгоритм последовательно слева направо проверяет про каждую формулу, что она либо является аксиомой, либо следует из предыдущих по правилу вывода. 
    \end{enumerate}
\end{proof}


\begin{remark}
    Традиционно логика разбивается на четыре части:
    \begin{itemize}
        \item Теория множеств
        \item Теория моделей
        \item Теория доказательств
        \item Теория вычислимости
    \end{itemize}
\end{remark}

\begin{theorem}[Линдстрёма]
    (без доказательства)
    \begin{enumerate}
        \item Не существует логической системы, которая более выразительна, чем логика первого порядка и удовлетворяет понижающей теореме Лёвингейма-Сколема и теореме о компактности.
        \item Не существует логической системы, которая более выразительна, чем логика первого порядка и удовлетворяет понижающей теореме Лёвингейма-Сколема и в которой множество тождественно истинных формул перечислимо.
    \end{enumerate}
\end{theorem}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% В нумерации лектора это 11 раздел
\subsubsection{Рекурсивные функции и предикаты}

Ограничимся функциями на $\bn$ (с нулём). Соответственно, далее все аргументы~— натуральные числа.

Введём две функции:

\[
    l(x, y) = \begin{cases}0, & \text{если $x<y$}\\ 1, &\text{в противном случае}\end{cases}
\]

\[
    I^n_k(x_1, \ldots, x_n) = x_k 
\]

\begin{definition}
    Рекурсивные функции на $\bn$ определяются индуктивно:
    \begin{itemize}
        \item $+, \cdot, l, I_k^n$ являются рекурсивными
        \item Суперпозиция рекурсивных является рекурсивной, то есть если $g = g(y_1, \ldots, y_k)$ рекурсивна и $h_1(\overline{x}), \ldots, h_k(\overline{x})$ рекурсивны, то и $g(h_1(\overline{x}), \ldots, h_k(\overline{x}))$ рекурсивна.
        \item Минимизация любой рекурсивной функции является рекурсивной. То есть, если $g(\overline{x}, y)$ рекурсивна и $\forall \overline{x}~\exists y~g(\overline{x}, y)=0$, то функция $f(\overline{x})=\mu y(g(\overline{x}, y)=0)$ тоже рекурсивна. Здесь $\mu y(P(y))$~— наименьшее значение $y$, при котором предикат истинен.
        \item Других рекурсивных функций нет.
    \end{itemize}
\end{definition}

\begin{remark}
    Любая рекурсивная функция вычислима, это доказывается индуктивно. А существует ли вычислимая функция, которая не рекурсивна?
\end{remark}

\begin{conjecture}[Тезис Чёрча]
    Любая тотальная (всюду определённая) вычислимая функция на $N$ рекурсивна.
\end{conjecture}

Почему тезис, а не теорема? Потому что понятие вычислимости не математично. % TODO: можно переформулировать

\begin{definition}
    Предикат $P(\overline{x})$ рекурсивен, если рекурсивна его характеристическая функция \[\chi_P(\overline{x}) = \begin{cases}0, & P(\overline{x})=\text{И}\\1, & P(\overline{x})=\text{Л}\end{cases}\]
\end{definition}

\begin{prop}[Свойства рекурсивных функций и предикатов]\
    \begin{itemize}
        \item Если предикат $P(y_1, \ldots, y_k)$ рекурсивен и функции $h_1(\overline{x}), \ldots, h_k(\overline{x})$ рекурсивны, то $P(h_1(\overline{x}), \ldots, h_k(\overline{x}))$ рекурсивен.
        \item $P(\overline{x}, y)$ рекурсивен и $\forall \overline{x}~ \exists y ~ P(\overline{x}, y)$, то тогда формула $f(\overline{x}) = \mu y(P(\overline{x}, y)=0)$ рекурсивна.
        \item $P(\overline{x}), Q (\overline{x}), R (\overline{x}, y) $ рекурсивны, то рекурсивны и предикаты $P (\overline{x}) \vee Q (\overline{x})$ (и для $\wedge$, $\rightarrow$), $\neg P (\overline{x}) $, $\forall y<z~R (\overline{x}, y)$ (по определению это $\forall y~(y<z\rightarrow R (\overline{x}, y))$), $\exists y<z~R (\overline{x}, y)$ (эквивалентно $\exists y~(y<z \wedge R (\overline{x}, y)) $) рекурсивны

        % копия задачи 1г
        \item  Рекурсивна функция \[ f\lr*{\bar{x}} = \begin{cases}
				g_1\lr*{\bar{x}}, & P_1\lr*{\bar{x}} = \text{И} \\
				g_2\lr*{\bar{x}}, & P_2\lr*{\bar{x}} = \text{И} \\
				\ldots & \ldots \\
				g_k\lr*{\bar{x}}, & P_k\lr*{\bar{x}} = \text{И}, \\
		\end{cases}\]
		здесь \(g_i\)~— рекурсивные функции, \(P_i\)~— дизъюнктные рекурсивные предикаты, \(\bigcup P_i = \bn^d\).

    \end{itemize}
\end{prop}

\begin{exmpl}
    \begin{itemize}\
        \item Все константые функции рекурсивны
        \item Функции, задаваемые полиномами с натуральными коэффициентами рекурсивны
        \item $\le, =, \divby$ рекурсивны
    \end{itemize}
\end{exmpl}

\begin{proof}(рекурсивность констант)\

    Хотим показать, что $f_c (\overline{x}) = c$ рекурсивна индукцией по $c$.

    Если $c=0$, то $f_0 (\overline{x}) = \mu y(y=0) = \mu y (I_{n+1}^{n+1} (\overline{x}, y) =0)$

    Если $c=1$, то $f_1 (\overline{x}) = \mu y (0<y) = \mu (l(f_0 (\overline{x}, y), I_{n+1}^{n+1} (\overline{x}, y))=0)$. Или можно было взять $f_1 (\overline{x}) = l(I_1^n (\overline{x}), I_1^n (\overline{x}) )$, если $n\ge 1$.

    Если $f_c (\overline{x}) $ построена, то $f_{c+1} (\overline{x}) = f_c (\overline{x}) + f_1 (\overline{x}) $ рекурсивна как сумма рекурсивных % отсебятина.
\end{proof}

\begin{prop}
    Существует рекурсивная фукнция $\beta(a, i)$ такая, что $\beta(0, i) = 0$, $\beta(a+1, i)\le a$ и $\forall n, a_0, \ldots, a_n~\exists a (\beta(a, 0)=a_0 \wedge \ldots, \beta(a, n)=a_n)$
\end{prop}

\begin{proof}
    Строим вспомогательную функцию $p(x, y) = (x+y)^2+x+1$. Она рекурсивна, потому что полином. Обладает свойствами $x, y < p(x, y)$ и $(x, y)\ne (x_1, y_1) \Rightarrow p(x, y)\ne p(x_1, y_1)$. Второе свойство доказывается сравнением $x+y$ с $x_1+y_1$: если они отличаются, то значения функции разделены квадратом большей суммы, а в случае равенства, значения функции различаются из-за $x\ne x_1$.

    % Дальше окончание доказательства с лекции 12:
    Тогда пусть $$\beta(a, i)=\mu x (a=0\vee x+1=a \vee \exists y<a~ \exists z<a~(a=p(y, z)\wedge y\divby(1+z\cdot p(x, i))))$$

    Первые два свойства следуют из первых двух членов дизъюнкции. Теперь зафиксируем $n, a_0, \ldots, a_n$ и проверим последнее свойство.
    Пусть $c = \max(p(a_0, 0), \ldots, p(a_n, n))$, $z = c!$, $y = \prod_{i=0}^n(1+z\cdot p(a_n, n))$. Будем доказывать, что $a = p(y, z)$ подходит.

    Проверяем, что $\beta(a, i)=a_i$ для $1\le i\le n$.  Для $x=a_i$ третье условие минимизации выполнено с заданными в предыдущем абзаце $y, z$. Докажем, что не существует $x<a_i$, удовлетворяющего условиям минимизации.

    Предположим противное, такой $x$ нашелся. Первые два члена дизъюнкции не могут выполняться, потому что $a>0, x+1<a_i+1<a$. Значит нашлись $y_1, z_1$, такие что $a = p(y_1, z_1)$ и $y_1 \divby (1+z\cdot p(x, i))$. Тогда $p(y, z) = a = p(y_1, z_1)$, следовательно $(y, z)=(y_1, z_1)$. Тогда $y\divby (1+z\cdot p(x, i))$. Распишем $y$ по определению, получим $$\left(\prod_{i=0}^n(1+z\cdot p(a_n, n))\right) \divby (1+z\cdot p(x, i))$$

    Заметим, что при $k, l\le c, k\ne l$ числа $1+zk$ и $1+zl$ взаимнопросты. Действительно, иначе найдётся простой $q | (1+zk)-(1+zl) = z(k-l) = c!(k-l)$. Тогда $q\le c \Rightarrow q | c!=z \Rightarrow q | zk, q|(1+zk)$, но они взаимнопросты. Все множители в произведении и число $(1+z\cdot p(x, i))$ имеют такой вид, поэтому для некоторого $j$ выполнено $1+z\cdot p(a_j, j)=1+z\cdot p(x, i)\Rightarrow (a_j, j)=(x, i)\Rightarrow i=j, x = a_i$.


\end{proof}
