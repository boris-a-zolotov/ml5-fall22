\subsection{Лекция 10}

\subsubsection{Свойства выводимости, теория Хенкина}
% В нумерации лектора это девятый раздел
% TODO: (оформление) не стоит создавать отдельные subsection для лекций, а вот для тем надо бы. Но оставить обозначение границ лекций было бы удобно – так легче искать конспект по номеру лекции.

% TODO: Добавить этот раздел. Примерно первые пятьдесят минут 10 лекции. Пара определений + задания из девятого ДЗ целиком + схема доказательства задачи 5

\begin{definition}
    $\text{ИП}_\sigma$~— исчисление предикатов в сигнатуре $\sigma$ (со всеми тавтологиями). $\text{ИП}^*_\sigma$ (только с основными тавтологиями)
\end{definition}

Из теоремы о полноте исчисления высказываний очевидно, что они эквивалентны, потому что любая тавтология может быть выведена из основных тавтологий с помощью правил вывода исчисления высказываний.

\begin{stat}[Свойства аксиом и правил]\
    \begin{itemize}
        \item Все аксиомы тождественно истинны (в любой структуре при любых значениях свободных переменных)
        \item Если формула получена по некоторым правилам из формул, тождественно истинных в данной структуре, то тогда она тождественно истинна. (Примечание: правила вывода есть в репозитории в папке с материалами)
        \item Если в любой аксиоме (любом правиле вывода) заменить все вхождения константного символа $c$ на переменную $z$, не входяющую в эту аксиому (это правило вывода), то получим аксиому (правило вывода). Неформально говоря, константы похожи на свободные переменные.
    \end{itemize}
\end{stat}

\begin{definition}
    \emph{Выводом} данной формулы $\vfi$ из T (множества формул) называется последовательность формул 
    $\vfi_0, \dots, \vfi_n = \vfi,$
    где $\vfi_i$ либо аксиома, либо принадлежит T, либо получается из предыдущих по одному из правил. 
\end{definition}

\begin{definition}
    Формула $\vfi$ \emph{выводима} из множества формул T, если существует вывод формулы $\vfi$ из T. Обозначается $T\vdash \vfi$.
\end{definition}

\begin{remark}
Это отношение очень похоже на $\models$. Действительно, мы докажем, что $T\vdash\vfi \iff T\models\vfi$. Заметим, что первое отношение чисто синтаксическое, а второе — семантическое. Этот результат строго доказывает, что любую истину можно доказать.
\end{remark}

(Примечание: Большинство следующих результатов давались на практике (смотри домашнее задание №9))

\begin{prop}[Свойства отношения выводимости]
    \begin{theorem}[о дедукции]
        Соотношения $T\vdash (\vfi\to\psi)$ и $T\cup\set*{\vfi}\vdash \psi$ равносильны для всех предложений $\vfi$, формул $\psi$ и множества формул T.
    \end{theorem}

    \begin{enumerate}
	    \item Если $\varphi \in T$, то $T\vdash\varphi$;
	    \item Если $T \vdash\varphi$, то $T_0 \vdash \varphi$ для подходящего конечного множества $T_0 \subseteq T$. 
	    \item Если $S \vdash \varphi$ и все формулы множества $S$ выводимы из $T$, то $T\vdash\varphi$. 
	    \item Если $T\cup\{\varphi\} \vdash \theta$ и $T\cup\{\psi\} \vdash \theta$, то $T\cup\{\varphi\lor\psi\}\vdash \theta$ ($\varphi$ и $\psi$~— предложения). 
	    \item Если $T\cup\{\varphi\}\vdash \psi$ и $T\cup\{\varphi\}\vdash\neg\psi$, то $T\vdash\neg\varphi$ ($\varphi$~— предложение). 
	    \item $T\vdash\varphi \land \psi$ тогда и только тогда, когда $T\vdash\varphi$ и $T\vdash\psi$.
    \end{enumerate}
\end{prop}

\begin{definition}
    Множество формул называется \emph{противоречивым}, если из него выводима любая формула. В противном случае называется \emph{непротиворечивым}.
\end{definition}

\begin{prop}[Свойства непротиворечивости]\
    \begin{enumerate}
	    \item Множество формул $T$ противоречиво тогда и только тогда, когда из него выводима хотя бы одна формула вида $\theta \land \neg\theta$. 
	    \item Если множества формул $T_n$, $n \in \mathbb{N}$ непротиворечивы и $T_0\subseteq T_1 \subseteq\ldots$, то множество $\bigcup_nT_n$ непротиворечиво. 
	    \item Если $\varphi$~— предложение, $T$~— множество формул и $T\cup\{\varphi\}$ противоречиво, то $T\vdash\neg\varphi$. 
	    \item Если множество формул $T$ непротиворечиво, то для любого предложения $\varphi$ непротиворечиво хотя бы одно из множеств $T\cup\{\varphi\}$ и $T\cup\{\neg\varphi\}$. 
	    \item Если множество предложений $S =T\cup\{\exists x\ \psi(x)\}$ непротиворечиво, то и множество $S\cup\{\psi(c)\}$ непротиворечиво для любого не входящего в формулы из $S$ сигнатурного константного символа $c$. 
        \end{enumerate}
\end{prop}

\begin{definition}
    Множество предложений T называется \emph{теорией Хенкина}, если $T$ непротиворечива и любое предложение или его отрицание выводимо из $T$ и для любого выводимого из $T$ предложения вида $\exists x\,\psi(x)$ существует константный символ $c\in\sigma$ такой, что $T\vdash\psi(c)$.
\end{definition}

\begin{prop}[Свойства теории Хенкина]
    Для теории Хенкина T выполнены следующие утверждения:
    \begin{enumerate}
	    \item $T\vdash\neg\varphi\iff T\not\vdash\varphi$. 
	    \item $T\vdash(\varphi \lor \psi)\ \iff\ T\vdash\varphi$ или $T\vdash\psi$. 
	    \item $T\vdash(\varphi \rightarrow \psi)\ \iff\ T\not\vdash\varphi$ или $T\vdash\psi$.
	    \item $T\vdash\exists x \theta(x)\iff  T\vdash\theta(t)$ для
некоторого терма $t$ без переменных. 
	    \item $T\vdash\forall x
\theta(x)\iff  T\vdash\theta(t)$ для любого терма $t$ без переменных.
\end{enumerate}
\end{prop}


\begin{prop}
	Любая непротиворечивая теория не более чем счетной сигнатуры $\sigma$ может быть расширена до теории Хенкина сигнатуры $\sigma_C$, где  $C$~— счетное множество новых константных символов. 
\end{prop}
\begin{proof}
Рассмотрим непротиворечивую теорию $S$ не более чем счётной сигнатуры $\sigma$. Расширим сигнатуру $\sigma$ до $\sigma_C$, добавив счётное количество новых константных символов $C = \{c_0, c_1, \ldots\}$.
$\sigma_c$ — счётная сигнатура, поэтому $\text{Prop}_{\sigma_C}$ не более чем счётно, поэтому можно пронумеровать его элементы: $\set*{\vfi_1, \vfi_2, \dots}$.

Для начала построим возрастающую последовательность вложенных теорий $\{T_n\}_{n\ge 0}$ в сигнатуре $\sigma_c$, начав с $T_0 = S$. Строим по индукции. Предположим $T_n$ построено, строим $T_{n+1}$. Рассмотрим несколько случаев:
\begin{itemize}
    \item Если $T_n\cup\{\varphi_n\}$ противоречива, то пусть $T_{n+1} = T_n\cup\{\neg\varphi_n\}$ -- она непротиворечива по ранее доказанному утверждению.
    \item Если $T_n\cup\{\varphi_n\}$ непротиворечива, и $\varphi_n$ не начинается с квантора существования, то $T_{n+1} = T_n\cup\{\varphi_n\}$.
    \item Если $T_n\cup\{\varphi_n\}$ непротиворечива, и $\varphi_n = \exists x~\psi(x)$, то выберем наименьший индекс $k$, такой что $c_k$ не входит в запись формул из $T_n$ (такой найдётся, потому что в записи $T_0$ нет символов из $C$, а в $T_n\textbackslash T_0$ конечное число элементов). Тогда пусть $T_{n+1} = T_n \cup \{\varphi_n, \psi(c_k)\}$. Из непротиворечивости $T_n\cup\{\varphi_n\}$ получаем непротиворечивость $T_{n+1}$.
\end{itemize}

Проверим, что $T = \bigcup_{n\ge 0} T_n$ подходит под требования. Непротиворечивость есть, так как каждая $T_n$ непротиворечива по построению. Для каждого предложения $\varphi = \varphi_m$ либо она была добавлена в $T_m$ (случаи 2,3), либо её отрицание было добавлено (случай 1). Поэтому любое предложение или его отрицание выводимо. Для предложения вида $\exists x~\psi(x) = \varphi_m$ на $m$ шаге добавляется нужная константа.

\end{proof}

\subsubsection{Теоремы о существовании модели и полноте $\text{ИП}_\sigma$}
% В нумерации лектора это десятый раздел
% Начинается примерно на 50 минуте 10 лекции

\begin{theorem}[О существовании модели]
Любое непротиворечивое множество предложений имеет модель.
\end{theorem}

\begin{proof}
    Пусть $S$~— непротиворечивое множество предложений сигнатуры $\sigma$. Хотим показать, что $S$ имеет модель. По теореме о компактности можем считать, что $S$ конечна. Тогда в формулы $S$ входит конечное подмножество символов сигнатуры $\sigma$, поэтому можно считать, что $\sigma$ конечна. Тогда, по доказанному выше факту, существует теория Хенкина $T$ сигнатуры $\sigma_C$, расширяющая $S$.

    Пусть $M$~— множество всех термов сигнатуры $\sigma_C$, не содержащих переменных (то есть это константы с "накрученными" на них функциональными символами). Введём на этом множестве отношение $\sim$ следующим образом: $s\sim t$, если $T\vdash s=t$.

    Дальше проверяем несколько несложных утверждений:
    \begin{enumerate}
        \item $\sim$ является отношением эквивалентности;
        \item Если $s_1\sim t_1, \ldots, s_n\sim t_n$, выполняется $T\vdash P(s_1, \ldots, s_n)$, то $T\vdash P(t_1, \ldots, t_n)$;
        \item Если $s_1\sim t_1, \ldots, s_n\sim t_n$, то $f(s_1, \ldots, s_n)\sim f(t_1, \ldots, t_n)$;
        \item Пусть $t = t(x_1, \ldots, x_n)$~— терм, $s_1, \ldots, s_n\in M$. Тогда $t^\mathbb{A}([s_1], \ldots, [s_n]) = [t(s_1, \ldots, s_n)]$;
        \item Для любой формулы $g(x_1, \dots, x_n)$ и для $s_1, \dots, s_k\in M$ выполнено $$\ba\models \vfi([s_1], \dots, [s_k]) \iff T\vdash \vfi(s_1, \dots, s_k)$$
    \end{enumerate}
    Первые три утверждения проверяются с помощью аксиом равенства. Первое свойство позволяет корректно определить $A = M/\equiv$ — носитель будущей структуры. Следующие два свойства позволяют корректно задать интерпретацию $I$ сигнатуры на этом множестве: в $\ba = (A, I)$ $f^\ba([t_1], \dots, [t_n])\defeq[f(t_1, \dots, t_n)]$, $P^\ba([t_1],\dots,[t_n])\iff T\vdash P(t_1, \dots, t_n)$, $c^\ba\defeq [c]$.

    Предпоследнее свойство доказывается по индукции.
\end{proof}
